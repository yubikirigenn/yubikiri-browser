<form id="searchForm">
  <input type="text" id="query" placeholder="URL または 検索ワードを入力" />
  <button type="submit">Go</button>
</form>

<script>
  const form = document.getElementById("searchForm");
  form.addEventListener("submit", e => {
    e.preventDefault();
    const query = document.getElementById("query").value.trim();
    if (!query) return;

    let finalUrl;
    const urlPattern = /^https?:\/\/|^[\w-]+\.[a-z]{2,}$/i;
    if (urlPattern.test(query)) {
      finalUrl = query.startsWith("http") ? query : `http://${query}`;
    } else {
      finalUrl = `https://duckduckgo.com/?q=${encodeURIComponent(query)}`;
    }

    window.location.href = `/proxy?url=${encodeURIComponent(finalUrl)}`;
  });
</script>
